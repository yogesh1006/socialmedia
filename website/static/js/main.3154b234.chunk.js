(this["webpackJsonpsocial-media-client"]=this["webpackJsonpsocial-media-client"]||[]).push([[0],{101:function(e,t,a){},124:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var c,n,s=a(0),r=a.n(s),o=a(41),l=a.n(o),i=(a(101),a(3)),u=a(4),d=a(6),p=a(10),b=a(11),j=a(2),m=a.n(j),h=a(7),f=a(21),x=a(8),g=a.n(x),O=Object(f.b)("users/signupUser",function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat("http://localhost:5000","/register"),t);case 3:return a=e.sent,console.log(a.data),e.abrupt("return",a.data.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),v=Object(f.b)("users/signinUser",function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat("http://localhost:5000","/login"),t);case 3:return a=e.sent,console.log(a.data),localStorage.setItem("token",a.data.data.token),localStorage.setItem("user",JSON.stringify(a.data.data)),e.abrupt("return",a.data.data);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),w=Object(f.c)({name:"user",initialState:{username:"",email:"",token:"",user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},isFetching:!1,isSuccess:!1,isError:!1,errorMessage:""},reducers:{getUser:function(e){return e.user=JSON.parse(localStorage.getItem("user")),e.isSuccess=!0,e},logout:function(e){return e.token=null,e.isSuccess=!1,localStorage.removeItem("token"),e},clearState:function(e){return e.isFetching=!1,e.isError=!1,e}},extraReducers:(c={},Object(b.a)(c,O.pending,(function(e){e.isFetching=!0})),Object(b.a)(c,O.fulfilled,(function(e,t){console.log(t),e.isFetching=!1,e.isSuccess=!0})),Object(b.a)(c,O.rejected,(function(e,t){var a=t.payload;e.isFetching=!1,e.isSuccess=!1,e.isError=!0,e.errorMessage=a.data.message})),Object(b.a)(c,v.pending,(function(e){e.isFetching=!0})),Object(b.a)(c,v.fulfilled,(function(e,t){return e.email=t.payload.email,e.username=t.payload.name,e.token=t.payload.token,e.user=t.payload,e.isFetching=!1,e.isSuccess=!0,e})),Object(b.a)(c,v.rejected,(function(e,t){var a=t.payload;console.log(a),e.isFetching=!1,e.isError=!0,e.errorMessage=a.data.message})),c)}),N=w.actions,y=N.clearState,k=N.getUser,S=N.logout,E=function(e){return e.user},_=(a(124),a(1)),I=function(){var e=Object(i.g)(),t=Object(d.b)(),a=Object(d.c)(E),c=a.isSuccess,n=a.user;console.log(c);var r=Object(s.useRef)(null),o=function(e,t){var a=Object(s.useState)(t),c=Object(u.a)(a,2),n=c[0],r=c[1];return Object(s.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||r(!n)};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[n,e]),[n,r]}(r,!1),l=Object(u.a)(o,2),b=l[0],j=l[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"flex justify-between items-center p-4 border-b-4 border-gray-400",children:[Object(_.jsx)("div",{className:"ml-3 text-2xl tracking-wide",children:Object(_.jsx)(p.b,{to:localStorage.getItem("token")?"/":"/login",children:"Instagram"})}),Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"menu-container relative flex justify-center items-center",children:[Object(_.jsxs)("button",{onClick:function(){return j(!b)},className:"menu-trigger bg-white flex justify-between items-center px-2 py-2 border-none align-middle shadow transition-shadow ml-auto rounded-lg cursor-pointer hover:shadow-2xl",children:[Object(_.jsx)("span",{className:"font-bold align-middle text-base my-3 mr-2",children:n.name}),Object(_.jsx)("img",{className:"rounded-full h-10 w-10",src:"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/df/df7789f313571604c0e4fb82154f7ee93d9989c6.jpg",alt:"User avatar"})]}),Object(_.jsx)("nav",{ref:r,className:b?"visible opacity-1 transform translate-y-0  bg-white rounded-lg absolute  top-20 right-0 w-60 shadow-2xl py-2":"bg-white rounded-lg absolute inset-x-0 top-20 right-0 w-60 shadow-md opacity-0 invisible py-2",children:c?Object(_.jsxs)("ul",{className:"m-0 p-2 divide-y",children:[Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(p.b,{className:"block text-black",to:"/profile",children:"Profile"})}),Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(p.b,{className:"block text-black",to:"/createpost",children:"Create Post"})}),Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(p.b,{className:"block text-black",to:"/myfollowingposts",children:"My following posts"})}),Object(_.jsx)("li",{className:"border-b-2 p-2",children:Object(_.jsx)("button",{onClick:function(){localStorage.clear(),t(S()),e.push("/login")},children:"Logout"})})]}):Object(_.jsxs)("ul",{className:"m-0 p-2 divide-y",children:[Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(p.b,{className:"block text-black",to:"/login",children:"Signin"})}),Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(p.b,{className:"block text-black",to:"/register",children:"Signup"})})]})})]})})]})})},C=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(u.a)(n,2),o=r[0],l=r[1],i=Object(d.c)(E).user;console.log(i);var p=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/api/get_user_posts"),{method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){p()}),[]),Object(s.useEffect)((function(){if(o){var e=new FormData;e.append("file",o),e.append("upload_preset","instagram"),e.append("cloud_name","pbu"),fetch("https://api.cloudinary.com/v1_1/pbu/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){var t=g.a.put("".concat("http://localhost:5000","/api/update_pic"),{pic:e.url},{headers:{authorization:localStorage.getItem("token")}});console.log(t)})).catch((function(e){console.log(e)}))}p()}),[o]);return Object(_.jsx)("div",{className:"flex flex-col justify-center items-center",children:Object(_.jsxs)("div",{className:" flex flex-col items-center justify-center max-w-lg ",children:[Object(_.jsxs)("div",{className:"flex border-b-2 border-light-blue-500 ",children:[Object(_.jsxs)("div",{className:"profile-image",children:[Object(_.jsx)("img",{className:"w-32 h-32 m-3 rounded-full border-gray-500 border-2",src:i.pic,alt:"",width:"384",height:"512"}),Object(_.jsx)("div",{children:Object(_.jsx)("input",{type:"file",className:"ml-6 flex justify-center opacity-0 h-full w-full",onChange:function(e){return t=e.target.files[0],void l(t);var t}})})]}),Object(_.jsxs)("div",{className:"flex flex-col flex-grow ml-5 ",children:[Object(_.jsx)("div",{className:"flex flex-row m-2",children:Object(_.jsx)("h1",{className:"mr-4 text-3xl",children:i.name})}),Object(_.jsxs)("div",{className:"flex flex-row my-auto",children:[Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.length})," posts"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:i.followers.length})," ","followers"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:i.following.length})," ","following"]})]})]})]}),Object(_.jsx)("div",{className:"mt-4 flex flex-wrap justify-around ",children:a.map((function(e,t){return Object(_.jsx)("img",{className:"w-1/4 m-1",src:e.photo,alt:e.title},t)}))})]})})},F=a(18),B=a(46),z=a(22),M=function(){var e=Object(d.b)(),t=Object(i.g)(),a=Object(d.c)(E),c=a.isFetching,n=a.isSuccess,r=a.errorMessage,o=a.isError;Object(s.useEffect)((function(){return function(){e(y())}}),[]),Object(s.useEffect)((function(){n&&(F.b.success("Signin successfull."),t.push("/")),o&&(F.b.error(r),e(y()))}),[n,o]);var l=Object(B.a)({initialValues:{email:"",password:""},validationSchema:z.a({email:z.b().email("Invalid email address").required("Required"),password:z.b().max(20,"Must be 20 characters or less").required("Required")}),onSubmit:function(t){e(v(t))}});return Object(_.jsxs)("form",{onSubmit:l.handleSubmit,className:"flex flex-col items-center h-96  justify-center",children:[Object(_.jsx)("div",{className:"mb-2",children:Object(_.jsx)("h1",{className:"text-3xl underline text-indigo-700",children:"Signin"})}),Object(_.jsx)("label",{htmlFor:"email",className:"block  mb-2",children:"Email Address"}),Object(_.jsx)("input",{id:"email",name:"email",type:"email",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.email}),l.touched.email&&l.errors.email?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:l.errors.email}):null,Object(_.jsx)("label",{htmlFor:"password",className:"block  mb-2",children:"Password"}),Object(_.jsx)("input",{id:"password",name:"password",type:"password",onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.password}),l.touched.password&&l.errors.password?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:l.errors.password}):null,Object(_.jsx)("button",{type:"submit",className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",disabled:!l.isValid,children:"Submit"}),Object(_.jsx)("div",{className:"mt-4 tracking-wide",children:Object(_.jsxs)("p",{children:["Don't have an Account?",Object(_.jsxs)(p.b,{to:"/register",className:"text-indigo-700 underline",children:[" ","Signup"]})]})}),c&&"Loading..."]})},P=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(void 0),r=Object(u.a)(n,2),o=r[0],l=r[1],b=Object(d.b)(),j=Object(i.g)();Object(s.useEffect)((function(){o&&b(O(v.values))}),[o]);var m=Object(d.c)(E),h=m.isFetching,f=m.isSuccess,x=m.errorMessage,g=m.isError;Object(s.useEffect)((function(){return function(){b(y())}}),[]),Object(s.useEffect)((function(){f&&(F.b.success("Signup successfull."),j.push("/login"),b(y())),g&&(F.b.error(x),b(y()))}),[f,g]);var v=Object(B.a)({initialValues:{name:"",email:"",password:"",pic:o},validationSchema:z.a({name:z.b().max(15,"Must be 15 characters or less").required("Required"),email:z.b().email("Invalid email address").required("Required"),password:z.b().max(20,"Must be 20 characters or less").required("Required")}),onSubmit:function(e){a?function(){var e=new FormData;e.append("file",a),e.append("upload_preset","instagram"),e.append("cloud_name","pbu"),fetch("https://api.cloudinary.com/v1_1/pbu/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){l(e.url)})).catch((function(e){console.log(e)}))}():b(O(e))}});return Object(_.jsxs)("form",{onSubmit:v.handleSubmit,className:"flex flex-col items-center h-full justify-center",children:[Object(_.jsx)("div",{className:"mb-2",children:Object(_.jsx)("h1",{className:"text-3xl underline text-indigo-700",children:"Signup"})}),Object(_.jsx)("label",{htmlFor:"name",className:"block  mb-2",children:" Name"}),Object(_.jsx)("input",{id:"name",name:"name",type:"text",onChange:v.handleChange,onBlur:v.handleBlur,value:v.values.name}),v.touched.name&&v.errors.name?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:v.errors.name}):null,Object(_.jsx)("label",{htmlFor:"email",className:"block  mb-2",children:"Email Address"}),Object(_.jsx)("input",{id:"email",name:"email",type:"email",onChange:v.handleChange,onBlur:v.handleBlur,value:v.values.email}),v.touched.email&&v.errors.email?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:v.errors.email}):null,Object(_.jsx)("label",{htmlFor:"password",className:"block  mb-2",children:"Password"}),Object(_.jsx)("input",{id:"password",name:"password",type:"password",onChange:v.handleChange,onBlur:v.handleBlur,value:v.values.password}),v.touched.password&&v.errors.password?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:v.errors.password}):null,Object(_.jsx)("label",{htmlFor:"image",className:"block  mb-2",children:"Upload Profile Picture"}),Object(_.jsx)("input",{id:"image",name:"image",type:"file",className:"ml-6 flex justify-center",onChange:function(e){return c(e.target.files[0])}}),Object(_.jsx)("button",{type:"submit",className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Submit"}),Object(_.jsx)("div",{className:"mt-4 tracking-wide",children:Object(_.jsxs)("p",{children:["Already Registered?",Object(_.jsx)(p.b,{to:"/login",className:"text-indigo-700 underline",children:" Signin"})]})}),h&&"Loading..."]})},q=(a(225),function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(u.a)(n,2),o=r[0],l=r[1],i=Object(d.c)(E).user,b=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat("http://localhost:5000","/api/get_all_posts"),{headers:{authorization:localStorage.getItem("token")}});case 3:t=e.sent,c(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){b()}),[]);var j=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/like_post"),{postId:t},{headers:{authorization:localStorage.getItem("token")}});case 3:a=e.sent,console.log(a),b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/unlike_post"),{postId:t},{headers:{authorization:localStorage.getItem("token")}});case 3:a=e.sent,console.log(a),b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/add_comment"),{comment:t,postId:a},{headers:{authorization:localStorage.getItem("token")}});case 3:c=e.sent,console.log(c.data.data),b(),l(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,g.a.delete("".concat("http://localhost:5000","/api/delete_post/").concat(t),{headers:{authorization:localStorage.getItem("token")}});case 4:a=e.sent,console.log(a.data),b(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"br-4",children:a.map((function(e,t){return Object(_.jsxs)("div",{className:"flex flex-col max-w-lg mx-auto mt-5 br-3 border-current",children:[Object(_.jsxs)("div",{className:"flex justify-between items-center",children:[Object(_.jsx)("h5",{className:"p-2",children:Object(_.jsx)(p.b,{to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile",children:e.postedBy.name})}),e.postedBy._id===i._id&&Object(_.jsx)("i",{className:"fas fa-trash mr-3 cursor-pointer",onClick:function(){return O(e._id)}})]}),Object(_.jsx)("div",{children:Object(_.jsx)("img",{className:"w-full h-80 object-cover",src:e.photo,alt:""})}),Object(_.jsxs)("div",{className:"m-2",children:[e.likes.includes(i._id)?Object(_.jsx)("i",{className:"far fa-thumbs-down fa-lg",onClick:function(){return f(e._id)}}):Object(_.jsx)("i",{className:"far fa-thumbs-up fa-lg",onClick:function(){return j(e._id)}}),Object(_.jsxs)("h4",{children:[e.likes.length," likes"]}),Object(_.jsxs)("h4",{className:"p-0 m-0",children:[Object(_.jsx)("span",{className:"mr-2 font-semibold",children:e.postedBy.name}),e.title]}),Object(_.jsx)("p",{className:"p-0 m-0",children:e.body}),e.comments.map((function(e){return Object(_.jsxs)("h6",{className:"font-light",children:[Object(_.jsx)("span",{className:"mr-2 font-semibold",children:e.postedBy.name}),e.text]},e._id)})),Object(_.jsxs)("div",{className:"flex justify-between border-4 border-light-blue-500 border-opacity-50",children:[Object(_.jsx)("input",{className:"focus:outline-none ring-0",type:"text",placeholder:"add a comment",value:o,onChange:function(e){return l(e.target.value)}}),Object(_.jsx)("i",{className:"flex far fa-comment fa-lg items-center cursor-pointer",onClick:function(){return x(o,e._id)}})]})]})]},t)}))})}),R=Object(f.b)("post/createPost",function(){var e=Object(h.a)(m.a.mark((function e(t){var a,c,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,c=t.body,n=t.pic,e.prev=1,e.next=4,g.a.post("".concat("http://localhost:5000","/api/create_post"),{title:a,body:c,pic:n},{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 4:return s=e.sent,console.log(s),e.abrupt("return",s.data.data);case 9:e.prev=9,e.t0=e.catch(1),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),J=Object(f.c)({name:"post",initialState:{posts:[],isFetching:!1,isSuccess:!1,isError:!1,errorMessage:""},reducers:{clearState:function(e){return e.isError=!1,e.isSuccess=!1,e.isFetching=!1,e}},extraReducers:(n={},Object(b.a)(n,R.pending,(function(e){e.isFetching=!0})),Object(b.a)(n,R.fulfilled,(function(e,t){return console.log(e),console.log(t),e.posts=t.payload,e.isFetching=!1,e.isSuccess=!0,e})),Object(b.a)(n,R.rejected,(function(e,t){var a=t.payload;e.isFetching=!1,e.isError=!0,e.errorMessage=a.data})),n)}),U=J.actions.clearState,L=function(e){return e.post},T=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(u.a)(n,2),o=r[0],l=r[1],p=Object(s.useState)(""),b=Object(u.a)(p,2),j=b[0],m=b[1],h=Object(s.useState)(""),f=Object(u.a)(h,2),x=f[0],g=f[1],O=Object(d.b)(),v=Object(i.g)(),w=Object(d.c)(L),N=w.isFetching,y=w.isSuccess,k=w.isError,S=w.errorMessage;Object(s.useEffect)((function(){k&&(F.b.error(S),O(U())),y&&(F.b.success("Post created successfully."),O(U()),v.push("/"))}),[k,y]),Object(s.useEffect)((function(){x&&O(R({title:a,body:o,pic:x}))}),[x]);return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"flex flex-col max-w-lg mx-auto mt-5",children:[Object(_.jsx)("h4",{children:"Create New Post"}),Object(_.jsx)("input",{className:"mt-3",type:"text",placeholder:"Enter title",value:a,onChange:function(e){return c(e.target.value)}}),Object(_.jsx)("input",{className:"mt-3",type:"text",placeholder:"Enter body",value:o,onChange:function(e){return l(e.target.value)}}),Object(_.jsx)("input",{className:"mt-3",type:"file",onChange:function(e){return m(e.target.files[0])}}),Object(_.jsx)("button",{className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",onClick:function(){return function(){var e=new FormData;e.append("file",j),e.append("upload_preset","instagram"),e.append("cloud_name","pbu"),fetch("https://api.cloudinary.com/v1_1/pbu/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){g(e.url)})).catch((function(e){console.log(e)}))}()},children:"Post"}),N&&"Posting..."]})})},A=a(47),D=a(96),V=["component"],G=function(e){var t=e.component,a=Object(D.a)(e,V);return Object(_.jsx)(i.b,Object(A.a)(Object(A.a)({},a),{},{render:function(e){return localStorage.getItem("token")?Object(_.jsx)(t,Object(A.a)({},e)):Object(_.jsx)(i.a,{to:"/login"})}}))},H=function(){var e=Object(s.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(i.h)().userId,r=Object(d.c)(E).user;console.log(a);var o=Object(s.useState)(!r.following.includes(n)),l=Object(u.a)(o,2),p=l[0],b=l[1],j=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat("http://localhost:5000","/api/get_userprofile/").concat(n),{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){j()}),[]);var f=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/follow"),{followId:n},{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:t=e.sent,console.log(t),j(),localStorage.setItem("user",JSON.stringify(t.data.data.user1)),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/unfollow"),{unfollowId:n},{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:t=e.sent,console.log(t),j(),b(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:a?Object(_.jsx)("div",{className:"flex flex-col justify-center items-center",children:Object(_.jsxs)("div",{className:" flex flex-col items-center justify-center max-w-lg ",children:[Object(_.jsxs)("div",{className:"flex border-b-2 border-light-blue-500 ",children:[Object(_.jsx)("div",{className:"profile-image",children:Object(_.jsx)("img",{className:"w-32 h-32 m-3 rounded-full border-gray-500 border-2",src:"https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces",alt:"",width:"384",height:"512"})}),Object(_.jsxs)("div",{className:"flex flex-col flex-grow ml-5 ",children:[Object(_.jsxs)("div",{className:"flex flex-row m-2",children:[Object(_.jsx)("h1",{className:"mr-4 text-3xl",children:a.user.name}),Object(_.jsx)("button",{className:"ml-3 bg-gray-100 p-3 br-3 border-current",children:"Edit Profile"})]}),Object(_.jsxs)("div",{className:"flex flex-row my-auto",children:[Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.posts.length})," ","posts"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.user.followers.length})," ","followers"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.user.following.length})," ","following"]})]}),Object(_.jsx)("div",{className:"flex my-auto",children:p?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("button",{onClick:function(){return f()},className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Follow"})}):Object(_.jsx)("button",{onClick:function(){return x()},className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Unfollow"})})]})]}),Object(_.jsx)("div",{className:"mt-4 flex flex-wrap justify-around ",children:a.posts.map((function(e,t){return Object(_.jsx)("img",{className:"w-1/4 m-1",src:e.photo,alt:e.title},t)}))})]})}):Object(_.jsx)("h2",{children:"Loading..."})})},K=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1];console.log(a);var n=Object(s.useState)(""),r=Object(u.a)(n,2),o=r[0],l=r[1],i=Object(d.c)(E).user,b=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat("http://localhost:5000","/api/get_otheruser_posts"),{headers:{authorization:localStorage.getItem("token")}});case 3:t=e.sent,console.log(t),c(t.data.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){b()}),[]);var j=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/like_post"),{postId:t},{headers:{authorization:localStorage.getItem("token")}});case 3:a=e.sent,console.log(a),b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/unlike_post"),{postId:t},{headers:{authorization:localStorage.getItem("token")}});case 3:a=e.sent,console.log(a),b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("".concat("http://localhost:5000","/api/add_comment"),{comment:t,postId:a},{headers:{authorization:localStorage.getItem("token")}});case 3:c=e.sent,console.log(c.data.data),b(),l(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,g.a.delete("".concat("http://localhost:5000","/api/delete_post/").concat(t),{headers:{authorization:localStorage.getItem("token")}});case 4:a=e.sent,console.log(a.data),b(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"br-4",children:a.map((function(e,t){return Object(_.jsxs)("div",{className:"flex flex-col max-w-lg mx-auto mt-5 br-3 border-current",children:[Object(_.jsxs)("div",{className:"flex justify-between items-center",children:[Object(_.jsx)("h5",{className:"p-2",children:Object(_.jsx)(p.b,{to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile",children:e.postedBy.name})}),e.postedBy._id===i._id&&Object(_.jsx)("i",{className:"fas fa-trash mr-3 cursor-pointer",onClick:function(){return O(e._id)}})]}),Object(_.jsx)("div",{children:Object(_.jsx)("img",{className:"w-full h-80 object-cover",src:e.photo,alt:""})}),Object(_.jsxs)("div",{className:"m-2",children:[e.likes.includes(i._id)?Object(_.jsx)("i",{className:"far fa-thumbs-down fa-lg",onClick:function(){return f(e._id)}}):Object(_.jsx)("i",{className:"far fa-thumbs-up fa-lg",onClick:function(){return j(e._id)}}),Object(_.jsxs)("h4",{children:[e.likes.length," likes"]}),Object(_.jsxs)("h4",{className:"p-0 m-0",children:[Object(_.jsx)("span",{className:"mr-2 font-semibold",children:e.postedBy.name}),e.title]}),Object(_.jsx)("p",{className:"p-0 m-0",children:e.body}),e.comments.map((function(e){return Object(_.jsxs)("h6",{className:"font-light",children:[Object(_.jsx)("span",{className:"mr-2 font-semibold",children:e.postedBy.name}),e.text]},e._id)})),Object(_.jsxs)("div",{className:"flex justify-between border-4 border-light-blue-500 border-opacity-50",children:[Object(_.jsx)("input",{className:"focus:outline-none ring-0",type:"text",placeholder:"add a comment",value:o,onChange:function(e){return l(e.target.value)}}),Object(_.jsx)("i",{className:"flex far fa-comment fa-lg items-center cursor-pointer",onClick:function(){return x(o,e._id)}})]})]})]},t)}))})};var Q=function(){var e=Object(i.g)(),t=Object(d.b)();return Object(s.useEffect)((function(){JSON.parse(localStorage.getItem("user"))?t(k()):e.push("/login")}),[]),Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(I,{}),Object(_.jsx)(F.a,{}),Object(_.jsxs)(i.d,{children:[Object(_.jsx)(i.b,{path:"/register",component:P}),Object(_.jsx)(i.b,{path:"/login",component:M}),Object(_.jsx)(i.b,{path:"/profile/:userId",component:H}),Object(_.jsx)(G,{exact:!0,path:"/",component:q}),Object(_.jsx)(G,{exact:!0,path:"/profile",component:C}),Object(_.jsx)(G,{path:"/createpost",component:T}),Object(_.jsx)(G,{path:"/myfollowingposts",component:K})]})]})},W=Object(f.a)({reducer:{user:w.reducer,post:J.reducer}});l.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(d.a,{store:W,children:Object(_.jsx)(p.a,{children:Object(_.jsx)(Q,{})})})}),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.3154b234.chunk.js.map