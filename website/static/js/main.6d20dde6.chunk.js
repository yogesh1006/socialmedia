(this["webpackJsonpsocial-media-client"]=this["webpackJsonpsocial-media-client"]||[]).push([[0],{103:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var r,n,c,s,i=a(0),o=a.n(i),l=a(42),u=a.n(l),d=(a(103),a(4)),p=a(9),b=a(6),j=a(13),m=a(3),f=a(2),h=a.n(f),x=a(7),O=a(11),g=a(10),v=a.n(g),w=Object(O.b)("users/signupUser",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.post("".concat("https://socialmedia21.herokuapp.com","/register"),t);case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),N=Object(O.b)("users/signinUser",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.post("".concat("https://socialmedia21.herokuapp.com","/login"),t);case 4:return n=e.sent,localStorage.setItem("token",n.data.data.token),localStorage.setItem("user",JSON.stringify(n.data.data)),e.abrupt("return",n.data.data);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),y=Object(O.c)({name:"user",initialState:{user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},isFetching:"",isSuccess:!1,isError:!1,errorMessage:""},reducers:{getUser:function(e){return e.user=JSON.parse(localStorage.getItem("user")),e.isSuccess=!0,e},logout:function(e){return e.token=null,e.isSuccess=!1,localStorage.removeItem("token"),e},clearState:function(e){return e.isFetching=!1,e.isError=!1,e}},extraReducers:(r={},Object(m.a)(r,w.pending,(function(e){e.isFetching=!0})),Object(m.a)(r,w.fulfilled,(function(e,t){e.isFetching=!1,e.isSuccess=!0})),Object(m.a)(r,w.rejected,(function(e,t){var a=t.payload;e.isFetching=!1,e.isSuccess=!1,e.isError=!0,e.errorMessage=a.data.message})),Object(m.a)(r,N.pending,(function(e){e.isFetching=!0})),Object(m.a)(r,N.fulfilled,(function(e,t){return e.user=t.payload,e.isFetching=!1,e.isSuccess=!0,e})),Object(m.a)(r,N.rejected,(function(e,t){var a=t.payload;e.isFetching=!1,e.isError=!0,e.errorMessage=a.message})),r)}),k=y.actions,S=(k.clearState,k.getUser),F=k.logout,C=function(e){return e.user},_=(a(70),a(1)),E=function(){var e=Object(d.g)(),t=Object(b.b)(),a=Object(b.c)(C),r=a.isSuccess,n=a.user,c=Object(i.useRef)(null),s=function(e,t){var a=Object(i.useState)(t),r=Object(p.a)(a,2),n=r[0],c=r[1];return Object(i.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||c(!n)};return n&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[n,e]),[n,c]}(c,!1),o=Object(p.a)(s,2),l=o[0],u=o[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"flex justify-between items-center p-4 bg-indigo-400",children:[Object(_.jsx)("div",{className:"ml-3 text-2xl tracking-wide",children:Object(_.jsx)(j.b,{to:localStorage.getItem("token")?"/":"/login",className:"text-3xl underline text-white",children:"Frndzs"})}),Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"menu-container relative flex justify-center items-center",children:[Object(_.jsxs)("button",{onClick:function(){return u(!l)},className:"menu-trigger bg-white flex justify-between items-center px-2 py-2 border-none align-middle shadow transition-shadow ml-auto rounded-lg cursor-pointer hover:shadow-2xl",children:[Object(_.jsx)("span",{className:"font-bold align-middle text-base my-3 mr-2",children:r&&n.name}),Object(_.jsx)("img",{className:"rounded-full h-10 w-10",src:"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/df/df7789f313571604c0e4fb82154f7ee93d9989c6.jpg",alt:"User avatar"})]}),Object(_.jsx)("nav",{ref:c,className:l?"visible opacity-1 transform translate-y-0  bg-white rounded-lg absolute  top-20 right-0 w-60 shadow-2xl py-2":"bg-white rounded-lg absolute inset-x-0 top-20 right-0 w-60 shadow-md opacity-0 invisible py-2",children:r?Object(_.jsxs)("ul",{className:"m-0 p-2 divide-y",children:[Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(j.b,{className:"block text-black",to:"/profile",children:"Profile"})}),Object(_.jsx)("li",{className:"border-b-2 p-2",children:Object(_.jsx)("button",{onClick:function(){localStorage.clear(),t(F()),e.push("/login")},children:"Logout"})})]}):Object(_.jsxs)("ul",{className:"m-0 p-2 divide-y",children:[Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(j.b,{className:"block text-black",to:"/login",children:"Signin"})}),Object(_.jsx)("li",{className:" p-2",children:Object(_.jsx)(j.b,{className:"block text-black",to:"/register",children:"Signup"})})]})})]})})]})})},I=a(19),B=Object(O.b)("feed/getuserposts",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.get("".concat("https://socialmedia21.herokuapp.com","/api/get_user_posts"));case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),V=Object(O.b)("feed/uploadpic",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/update_pic"),{pic:t});case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),W=Object(O.b)("feed/getuser",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.get("".concat("https://socialmedia21.herokuapp.com","/api/get_user"));case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),P=Object(O.c)({name:"profile",initialState:{posts:[],profile:{},status:"idle",error:null},reducers:{resetProfile:function(e,t){e.posts=[],e.user={},e.status="idle",e.error=null}},extraReducers:(n={},Object(m.a)(n,B.pending,(function(e,t){e.status="loading"})),Object(m.a)(n,B.fulfilled,(function(e,t){e.posts=t.payload})),Object(m.a)(n,W.pending,(function(e,t){e.status="loading"})),Object(m.a)(n,W.fulfilled,(function(e,t){e.profile=t.payload})),n)}),q=(P.actions.resetProfile,function(e){return e.profile}),R=function(){var e=Object(i.useState)(""),t=Object(p.a)(e,2),a=t[0],r=t[1],n=Object(b.c)(C).user,c=Object(b.c)(q),s=c.profile,o=c.posts,l=Object(b.b)();Object(i.useEffect)((function(){null!==n.token&&Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(B());case 2:case"end":return e.stop()}}),e)})))()}),[n.token]),Object(i.useEffect)((function(){null!==n.token&&Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(W());case 2:case"end":return e.stop()}}),e)})))()}),[n.token]),Object(i.useEffect)((function(){if(a){var e=new FormData;e.append("file",a),e.append("upload_preset","instagram"),e.append("cloud_name","pbu"),fetch("https://api.cloudinary.com/v1_1/pbu/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){l(V(e.url)).unwrap().then((function(e){I.b.success(e.data.message)})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))}}),[a]);return Object(_.jsx)("div",{className:"flex flex-col justify-center items-center ",children:Object(_.jsxs)("div",{className:" flex flex-col items-center justify-center max-w-2xl",children:[Object(_.jsxs)("div",{className:"flex border-b-2 border-light-blue-500 ",children:[Object(_.jsxs)("div",{className:"profile-image",children:[Object(_.jsx)("img",{className:"w-40 max-w-4 h-auto m-3 rounded-full object-cover border-gray-500 border-2",src:s.pic,alt:"profilepic"}),Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"file",id:"actual-btn",hidden:!0,onChange:function(e){return t=e.target.files[0],void r(t);var t}}),Object(_.jsx)("label",{className:"bg-blue-400 p-1 align-center",htmlFor:"actual-btn",children:"Upload"})]})]}),Object(_.jsxs)("div",{className:"flex flex-col flex-grow justify-start ml-5 ",children:[Object(_.jsx)("div",{className:"flex flex-row p-2",children:Object(_.jsx)("h1",{className:" text-3xl",children:n.name})}),Object(_.jsxs)("div",{className:"flex flex-row my-auto",children:[Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:o.length})," posts"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:n.followers.length})," ","followers"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:n.following.length})," ","following"]})]})]})]}),Object(_.jsx)("div",{className:"mt-4 flex flex-row flex-wrap justify-start gap-1 md:gap-2",children:o.map((function(e,t){return Object(_.jsx)("img",{className:"w-36 md:w-1/3",src:e.photo,alt:e.title},t)}))})]})})},z=a(47),M=a(23),T=a(27),J=a.n(T),U=function(){var e=Object(b.b)(),t=Object(d.g)(),a=Object(b.c)(C).isFetching,r=Object(z.a)({initialValues:{email:"test@gmail.com",password:"Test@123"},validationSchema:M.a({email:M.b().email("Invalid email address").required("Required"),password:M.b().max(20,"Must be 20 characters or less").required("Required")}),onSubmit:function(a){e(N(a)).unwrap().then((function(e){I.b.success("Signin Successfull."),t.push("/")})).catch((function(e){return I.b.success(e.message)}))}});return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("form",{onSubmit:r.handleSubmit,className:"flex flex-col items-center h-96  justify-center",children:[Object(_.jsx)("div",{className:"mb-2",children:Object(_.jsx)("h1",{className:"text-3xl underline text-indigo-700",children:"Signin"})}),Object(_.jsx)("label",{htmlFor:"email",className:"block  mb-2",children:"Email Address"}),Object(_.jsx)("input",{id:"email",name:"email",type:"email",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.email}),r.touched.email&&r.errors.email?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:r.errors.email}):null,Object(_.jsx)("label",{htmlFor:"password",className:"block  mb-2",children:"Password"}),Object(_.jsx)("input",{id:"password",name:"password",type:"password",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.password}),r.touched.password&&r.errors.password?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:r.errors.password}):null,Object(_.jsx)("button",{type:"submit",className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",disabled:!r.isValid,children:"Login"}),Object(_.jsx)("div",{className:"mt-4 tracking-wide",children:Object(_.jsxs)("p",{children:["Don't have an Account?",Object(_.jsxs)(j.b,{to:"/register",className:"text-indigo-700 underline",children:[" ","Signup"]})]})})]}),a&&Object(_.jsxs)("div",{className:"flex flex-col justify-center items-center absolute inset-0 z-10",children:[" ",Object(_.jsx)(J.a,{type:"TailSpin",color:"#00BFFF",height:70,width:70})]})]})},A=function(){var e=Object(b.b)(),t=Object(d.g)(),a=Object(b.c)(C).isFetching,r=Object(z.a)({initialValues:{name:"",email:"",password:""},validationSchema:M.a({name:M.b().max(15,"Must be 15 characters or less").required("Required"),email:M.b().email("Invalid email address").required("Required"),password:M.b().max(20,"Must be 20 characters or less").required("Required")}),onSubmit:function(a){e(w(a)).unwrap().then((function(e){I.b.success("Signup successfull."),t.push("/login")})).catch((function(e){return console.log(e)}))}});return Object(_.jsxs)("form",{onSubmit:r.handleSubmit,className:"flex flex-col items-center h-full justify-center",children:[Object(_.jsx)("div",{className:"mb-2",children:Object(_.jsx)("h1",{className:"text-3xl underline text-indigo-700",children:"Signup"})}),Object(_.jsxs)("label",{htmlFor:"name",className:"block  mb-2",children:[" ","Name"]}),Object(_.jsx)("input",{id:"name",name:"name",type:"text",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.name}),r.touched.name&&r.errors.name?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:r.errors.name}):null,Object(_.jsx)("label",{htmlFor:"email",className:"block  mb-2",children:"Email Address"}),Object(_.jsx)("input",{id:"email",name:"email",type:"email",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.email}),r.touched.email&&r.errors.email?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:r.errors.email}):null,Object(_.jsx)("label",{htmlFor:"password",className:"block  mb-2",children:"Password"}),Object(_.jsx)("input",{id:"password",name:"password",type:"password",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.password}),r.touched.password&&r.errors.password?Object(_.jsx)("div",{className:"text-left text-red-500 text-sm",children:r.errors.password}):null,Object(_.jsx)("button",{type:"submit",className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Signup"}),Object(_.jsx)("div",{className:"mt-4 tracking-wide",children:Object(_.jsxs)("p",{children:["Already Registered?",Object(_.jsxs)(j.b,{to:"/login",className:"text-indigo-700 underline",children:[" ","Signin"]})]})}),a&&Object(_.jsxs)("div",{className:"flex flex-col justify-center items-center absolute inset-0 z-10",children:[" ",Object(_.jsx)(J.a,{type:"TailSpin",color:"#00BFFF",height:70,width:70})]})]})},D=(a(244),a(48)),L=a(98),G=["component"],H=function(e){var t=e.component,a=Object(L.a)(e,G);return Object(_.jsx)(d.b,Object(D.a)(Object(D.a)({},a),{},{render:function(e){return localStorage.getItem("token")?Object(_.jsx)(t,Object(D.a)({},e)):Object(_.jsx)(d.a,{to:"/login"})}}))},K=function(){var e=Object(i.useState)(null),t=Object(p.a)(e,2),a=t[0],r=t[1],n=Object(d.h)().userId,c=Object(b.c)(C).user,s=Object(i.useState)(!c.following.includes(n)),o=Object(p.a)(s,2),l=o[0],u=o[1],j=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat("https://socialmedia21.herokuapp.com","/api/get_userprofile/").concat(n),{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){j()}),[]);var m=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/follow"),{followId:n},{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:t=e.sent,j(),localStorage.setItem("user",JSON.stringify(t.data.data.user1)),u(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/unfollow"),{unfollowId:n},{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}});case 3:j(),u(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:a?Object(_.jsx)("div",{className:"flex flex-col justify-center items-center",children:Object(_.jsxs)("div",{className:" flex flex-col items-center justify-center max-w-lg ",children:[Object(_.jsxs)("div",{className:"flex border-b-2 border-light-blue-500 ",children:[Object(_.jsx)("div",{className:"profile-image",children:Object(_.jsx)("img",{className:"w-32 h-32 m-3 rounded-full border-gray-500 border-2",src:"https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces",alt:"",width:"384",height:"512"})}),Object(_.jsxs)("div",{className:"flex flex-col flex-grow ml-5 ",children:[Object(_.jsx)("div",{className:"flex flex-row m-2",children:Object(_.jsx)("h1",{className:"mr-4 text-3xl",children:a.user.name})}),Object(_.jsxs)("div",{className:"flex flex-row my-auto",children:[Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.posts.length})," ","posts"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.user.followers.length})," ","followers"]}),Object(_.jsxs)("div",{className:"mr-2.5",children:[Object(_.jsx)("span",{className:"font-semibold",children:a.user.following.length})," ","following"]})]}),Object(_.jsx)("div",{className:"flex my-auto",children:l?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("button",{onClick:function(){return m()},className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Follow"})}):Object(_.jsx)("button",{onClick:function(){return f()},className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",children:"Unfollow"})})]})]}),Object(_.jsx)("div",{className:"mt-4 flex flex-wrap justify-around ",children:a.posts.map((function(e,t){return Object(_.jsx)("img",{className:"w-1/4 m-1",src:e.photo,alt:e.title},t)}))})]})}):Object(_.jsx)("h2",{children:"Loading..."})})},Q=Object(O.b)("feed/getallposts",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.get("".concat("https://socialmedia21.herokuapp.com","/api/get_all_posts"));case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),X=Object(O.b)("feed/getallfollowinguserposts",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.get("".concat("https://socialmedia21.herokuapp.com","/api/get_otheruser_posts"));case 4:return n=e.sent,e.abrupt("return",n.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Y=Object(O.b)("feed/likepost",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/like_post"),{postId:t});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Z=Object(O.b)("feed/unlikepost",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/unlike_post"),{postId:t});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),$=Object(O.b)("feed/deletepost",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.delete("".concat("https://socialmedia21.herokuapp.com","/api/delete_post/").concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),ee=Object(O.b)("feed/makecomment",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,v.a.put("".concat("https://socialmedia21.herokuapp.com","/api/add_comment"),{comment:t.text,postId:t.id});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),te=Object(O.c)({name:"feed",initialState:{posts:[],status:"idle",error:null},reducers:{resetFeed:function(e,t){e.posts=[],e.status="idle",e.error=null}},extraReducers:(c={},Object(m.a)(c,Q.pending,(function(e,t){e.status="loading"})),Object(m.a)(c,Q.fulfilled,(function(e,t){e.posts=t.payload})),Object(m.a)(c,X.pending,(function(e,t){e.status="loading"})),Object(m.a)(c,X.fulfilled,(function(e,t){e.posts=t.payload})),Object(m.a)(c,Y.fulfilled,(function(e,t){e.posts=t.payload.data})),Object(m.a)(c,Z.fulfilled,(function(e,t){e.posts=t.payload.data})),Object(m.a)(c,$.fulfilled,(function(e,t){e.posts=t.payload})),Object(m.a)(c,ee.fulfilled,(function(e,t){e.posts=t.payload.data})),c)}),ae=(te.actions.resetFeed,function(e){return e.feed}),re=Object(O.b)("post/createPost",function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,n,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.body,c=t.pic,s=a.rejectWithValue,e.prev=2,e.next=5,v.a.post("".concat("https://socialmedia21.herokuapp.com","/api/create_post"),{title:r,body:n,pic:c});case 5:return i=e.sent,e.abrupt("return",i.data.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),ne=Object(O.c)({name:"post",initialState:{posts:[],isFetching:!1,isSuccess:!1,isError:!1,errorMessage:""},reducers:{clearState:function(e){return e.isError=!1,e.isSuccess=!1,e.isFetching=!1,e}},extraReducers:(s={},Object(m.a)(s,re.pending,(function(e){e.isFetching=!0})),Object(m.a)(s,re.fulfilled,(function(e,t){e.posts=t.payload,e.isFetching=!1,e.isSuccess=!0})),Object(m.a)(s,re.rejected,(function(e,t){var a=t.payload;e.isFetching=!1,e.isError=!0,e.errorMessage=a.data})),s)}),ce=ne.actions.clearState,se=function(e){return e.post},ie=function(e){var t=Object(i.useState)(""),a=Object(p.a)(t,2),r=a[0],n=a[1],c=Object(i.useState)(""),s=Object(p.a)(c,2),o=s[0],l=s[1],u=Object(i.useState)(""),j=Object(p.a)(u,2),m=j[0],f=j[1],h=Object(i.useState)(""),x=Object(p.a)(h,2),O=x[0],g=x[1];console.log(e);var v=Object(b.b)(),w=Object(d.g)(),N=Object(b.c)(se),y=N.isFetching,k=N.isSuccess,S=N.isError,F=N.errorMessage;Object(i.useEffect)((function(){S&&(I.b.error(F),v(ce())),k&&(I.b.success("Post created successfully."),v(ce()),w.push("/"))}),[S,k]),Object(i.useEffect)((function(){O&&v(re({title:r,body:o,pic:O}))}),[O]);return Object(_.jsxs)("div",{className:" flex flex-col  p-6 max-w-2xl mx-auto mt-2 border border-gray-500 rounded-lg border-current",children:[Object(_.jsxs)("div",{className:"flex justify-between items-center",children:[Object(_.jsx)("h4",{children:"Create New Post"}),Object(_.jsx)("button",{onClick:function(){return e.setPost(!1)},children:"close"})]}),Object(_.jsx)("input",{className:"mt-3",type:"text",placeholder:"Write something special about the post.",value:r,onChange:function(e){return n(e.target.value)}}),Object(_.jsx)("input",{className:"mt-3",type:"text",placeholder:"What do you want to talk about?",value:o,onChange:function(e){return l(e.target.value)}}),Object(_.jsx)("input",{className:"mt-3",type:"file",onChange:function(e){return f(e.target.files[0])}}),Object(_.jsx)("button",{className:"px-6 py-2 mt-4 bg-indigo-700 text-white hover:bg-indigo-400",onClick:function(){return function(){var e=new FormData;e.append("file",m),e.append("upload_preset","instagram"),e.append("cloud_name","pbu"),fetch("https://api.cloudinary.com/v1_1/pbu/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){g(e.url)})).catch((function(e){console.log(e)}))}()},children:"Post"}),y&&Object(_.jsx)("div",{className:"flex flex-col justify-center items-center absolute inset-0 z-10",children:Object(_.jsx)(J.a,{type:"TailSpin",color:"#00BFFF",height:70,width:70})})]})},oe=function(){var e=Object(i.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(!1),c=Object(p.a)(n,2),s=c[0],o=c[1],l=Object(i.useState)(""),u=Object(p.a)(l,2),d=u[0],m=u[1],f=Object(b.c)(C),O=f.user,g=f.isFetching,v=Object(b.c)(ae).posts,w=Object(b.c)(q).profile;console.log(w);var N=Object(b.b)();Object(i.useEffect)((function(){null!==O.token&&Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Q());case 2:case"end":return e.stop()}}),e)})))()}),[O.token]);return Object(_.jsxs)(_.Fragment,{children:[g&&Object(_.jsxs)("div",{className:"flex flex-col justify-center items-center absolute inset-0 z-10",children:[" ",Object(_.jsx)(J.a,{type:"TailSpin",color:"#00BFFF",height:70,width:70})]}),Object(_.jsx)("div",{className:"flex flex-col  p-6 max-w-2xl mx-auto mt-2 border border-gray-500 rounded-lg border-current",children:Object(_.jsx)("button",{onClick:function(){o(!1===s)},className:"justify-center items-center border border-gray-500 rounded-lg border-current bg-gray-300 p-3",children:"Write a post."})}),s&&Object(_.jsx)(ie,{createPost:s,setPost:o}),v.map((function(e,t){return Object(_.jsxs)("div",{className:"flex flex-col max-w-2xl mx-auto mt-2 border border-gray-500 rounded-lg border-current",children:[Object(_.jsxs)("div",{className:"flex justify-between items-center",children:[Object(_.jsxs)("div",{className:"flex flex-row items-center",children:[Object(_.jsx)("img",{src:e.photo,className:"rounded-full w-16 h-16 object-cover m-1",alt:"img"}),Object(_.jsxs)("div",{className:"flex flex-col justify-center items-start ml-2",children:[Object(_.jsx)("h5",{className:"font-bold",children:Object(_.jsx)(j.b,{to:e.postedBy._id!==O._id?"/profile/".concat(e.postedBy._id):"/profile",children:e.postedBy.name})}),Object(_.jsxs)("small",{children:[" ",new Date(e.created_at).toDateString()]})]})]}),e.postedBy._id===O._id&&Object(_.jsx)("i",{className:"fas fa-trash mr-3 cursor-pointer",onClick:function(){return t=e._id,void N($(t));var t}})]}),Object(_.jsxs)("div",{className:"flex flex-col justify-start m-3",children:[Object(_.jsx)("h4",{className:"p-0 m-0 ",children:Object(_.jsx)("span",{className:"mr-2 font-semibold tracking-wide",children:e.title})}),Object(_.jsx)("p",{className:"p-0 m-0",children:e.body})]}),Object(_.jsx)("div",{children:Object(_.jsx)("img",{className:"w-full h-auto object-cover max-w-2xl rounded-sm border-gray-500",src:e.photo,alt:""})}),Object(_.jsxs)("div",{className:"flex p-3 gap-x-3",children:[e.likes.includes(O._id)?Object(_.jsx)("i",{className:"far fa-thumbs-down fa-lg cursor-pointer",onClick:function(){return t=e._id,void N(Z(t));var t}}):Object(_.jsx)("i",{className:"far fa-thumbs-up fa-lg cursor-pointer",onClick:function(){return t=e._id,void N(Y(t));var t}}),Object(_.jsxs)("span",{children:[" ",e.likes.length]}),Object(_.jsxs)("button",{onClick:function(){r(!0!==a)},children:[Object(_.jsx)("span",{children:Object(_.jsx)("i",{className:"far fa-comment-alt fa-lg"})})," ","Comment"]})]}),Object(_.jsxs)("div",{className:"m-2",children:[e.comments.map((function(e){return Object(_.jsxs)("h6",{className:"font-light truncate",children:[Object(_.jsx)("span",{className:"mr-2 font-semibold",children:e.postedBy.name}),e.text]},e._id)})),a&&Object(_.jsxs)("div",{className:"flex justify-between border-opacity-50",children:[Object(_.jsx)("input",{className:" focus:outline-none border-none focus:border-gray-400 rounded-full",type:"text",size:9,placeholder:"Add a comment...",value:d,onChange:function(e){return m(e.target.value)}}),Object(_.jsx)("button",{className:"bg-indigo-400 p-3 rounded-xl",onClick:function(){return t=d,a=e._id,N(ee({text:t,id:a})),void m("");var t,a},children:"comment"})]})]})]},t)}))]})};!function(e){e.interceptors.request.use((function(e){return e.url.includes("api")&&(e.headers.authorization=localStorage.getItem("token")),e}),(function(e){return Promise.reject(e)}))}(v.a);var le=function(){var e=Object(d.g)(),t=Object(b.b)();return Object(i.useEffect)((function(){JSON.parse(localStorage.getItem("user"))?t(S()):e.push("/login")}),[]),Object(_.jsxs)("div",{className:"App mb-5",children:[Object(_.jsx)(E,{}),Object(_.jsx)(I.a,{}),Object(_.jsxs)(d.d,{children:[Object(_.jsx)(d.b,{path:"/register",component:A}),Object(_.jsx)(d.b,{path:"/login",component:U}),Object(_.jsx)(H,{path:"/profile/:userId",component:K}),Object(_.jsx)(H,{exact:!0,path:"/",component:oe}),Object(_.jsx)(H,{exact:!0,path:"/profile",component:R})]})]})},ue=Object(O.a)({reducer:{user:y.reducer,post:ne.reducer,feed:te.reducer,profile:P.reducer}});u.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(b.a,{store:ue,children:Object(_.jsx)(j.a,{children:Object(_.jsx)(le,{})})})}),document.getElementById("root"))},70:function(e,t,a){}},[[245,1,2]]]);
//# sourceMappingURL=main.6d20dde6.chunk.js.map